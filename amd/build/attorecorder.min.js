define(["jquery"],function(a){return{init:function(){function b(){var a=navigator.userAgent.toLowerCase(),b=navigator.appVersion.toLowerCase(),c=a.indexOf("msie")>-1&&a.indexOf("opera")==-1,d=c&&b.indexOf("msie 6.")>-1,e=c&&b.indexOf("msie 7.")>-1,f=c&&b.indexOf("msie 8.")>-1,g=c&&b.indexOf("msie 9.")>-1,h=c&&b.indexOf("msie 10.")>-1,i=a.indexOf("trident/7")>-1;return c||d||e||f||g||h||i}function c(){var a=navigator.userAgent.toLowerCase(),b=a.indexOf("edge")>-1,c=a.indexOf("chrome")>-1&&a.indexOf("edge")==-1,d=a.indexOf("firefox")>-1,e=a.indexOf("safari")>-1&&a.indexOf("chrome")==-1,f=a.indexOf("opera")>-1;return b===!0&&c===!1&&d===!1&&e===!1&&f===!1}function d(){if(b()||c()){var d="";return d=b()?"Internet Explorer":"Edge",require(["core/str"],function(b){var c=b.get_string("unsupported_browser","local_mymedia",d);a.when(c).done(function(a){h(a)})}),B(),C(),!0}return!1}function e(){var a,b=navigator.userAgent;return a=b.match(/iPhone|iPad|iPod/)?"iOS":b.match(/Android|android/)?"Android":b.match(/Linux|linux/)?"Linux":b.match(/Win(dows)/)?"Windows":b.match(/Mac|PPC/)?"Mac OS":b.match(/CrOS/)?"Chrome OS":"Other"}function f(){var b=e();return("iOS"==b||"Android"==b)&&(require(["core/str"],function(c){var d=c.get_string("unsupported_os","local_mymedia",b);a.when(d).done(function(a){h(a)})}),B(),C(),!0)}function g(){var a=window.location.protocol;return a.indexOf("https")!=-1}function h(b){var c="";c='<p><font color="red">'+b+"</font></p>",a("#upload_info").html(c),B(),C()}function i(b){var c='<video id="webcam" width="'+S+'" height="'+T+'" ';c=c+'src="'+b+'" autoplay="false" oncontextmenu="return false;" controls></video>',a("#videospan").html(c),document.getElementById("webcam").pause(),document.getElementById("webcam").currentTime=0}function j(b){var c='<video id="webcam" width="'+S+'" height="'+T+'" ';c+='autoplay="0" muted oncontextmenu="return false;"></video>',a("#videospan").html(c),a("#webcam").attr("src",b)}function k(){a("#recstop").attr("src",a("#stopurl").val()),a("#recstop").off("click"),a("#recstop").on("click",function(){l()}),a("#leftspan").css("display","inline"),a("#webcam").volume=0,Y.start(),require(["core/str"],function(b){var c=b.get_string("now_recording","local_mymedia",null);a.when(c).done(function(b){a("#status").html('<font color="red">'+b+"</font>")})})}function l(){if(Y.ondataavailable=function(b){V=new Blob([b.data],{type:b.data.type}),X=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(V):window.webkitURL.createObjectURL(V),i(X),M=V.size;var c="",d=0;M>1073741824?(d=M/1073741824,c=d.toFixed(2)+" G"):M>1048576?(d=M/1048576,c=d.toFixed(2)+" M"):M>1024?(d=M/1024,c=d.toFixed(2)+" k"):c=M+" ",require(["core/str"],function(b){var d=b.get_string("video_preview","local_mymedia",null);a.when(d).done(function(b){b='<font color="green">'+b+"("+V.type+", ",b=b+c+"B).</font>",a("#status").html(b)})}),O=o(V.type),N=n(),N===!1&&(require(["core/str"],function(b){var c=b.get_string("wrong_filesize","local_mymedia",null);a.when(c).done(function(a){window.alert(a)})}),P=O,Q=0,R=0),q(),W=a("#filename").val()+"."+p(V.type)},void 0!==U.getTracks&&null!==U.getTracks){for(var b=U.getTracks(),c=b.length-1;c>=0;--c)b[c].stop();void 0!==document.getElementById("webcam").srcObject&&(document.getElementById("webcam").srcObject=null)}Y.stop(),a("#leftspan").css("display","none"),a("#rightspan").css("display","inline"),a("#remove").on("click",function(){m()})}function m(){if(!g())return void require(["core/str"],function(b){var c=b.get_string("require_https","local_mymedia");a.when(c).done(function(a){h(a)})});if(!d()&&!f()){navigator.mediaDevices=navigator.mediaDevices||(navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(a){return function(b,c){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,a,b,c)}}}:null);try{if(null===navigator.mediaDevices||void 0===navigator.mediaDevices||null===MediaRecorder||void 0===MediaRecorder)return void require(["core/str"],function(b){var c=b.get_string("disable_webrtc","local_mymedia",null);a.when(c).done(function(a){h(a)})});if(null===$||void 0===$||null===_||void 0===_)return void require(["core/str"],function(b){var c=b.get_string("disable_objecturl","local_mymedia",null);a.when(c).done(function(a){h(a)})})}catch(b){return require(["core/str"],function(b){var c=b.get_string("disable_webrtc","local_mymedia",null);a.when(c).done(function(a){h(a)})}),void window.console.log(b)}if(j(null),null!==X&&(window.URL&&window.URL.revokeObjectURL?window.URL.revokeObjectURL(X):window.webkitURL.revokeObjectURL(X),X=null,V=null),null!==U)if(void 0!==U.getTracks||null!==U.getTracks){for(var c=U.getTracks(),e=c.length-1;e>=0;--e)c[e].stop();document.getElementById("webcam").srcObject&&(document.getElementById("webcam").srcObject=null)}else U.stop();M=0,N=!1,O="",a("#recstop").off("click"),a("#remove").off("click"),a("#webcam").off("ondataavailable");var i="",l=MediaSource||MediaRecorder;i=l.isTypeSupported("video/webm;codecs=vp8")?"video/webm; codecs=vp8":l.isTypeSupported("video/webm;codecs=vp9")?"video/webm; codecs=vp9":l.isTypeSupported("video/webm")?"video/webm":"video/mp4",Z={audioBitsPerSecond:128e3,videoBitsPerSecond:15e5,mimeType:i,audio:{echoCancellation:!1},video:{mandatory:{minWidth:320,minHeight:240,maxWidth:1280,maxHeight:720,minFrameRate:5,maxFrameRate:15},optional:[{facingMode:"user"}]}};var m=navigator.mediaDevices.getUserMedia(Z);m.then(function(b){U=b;var c=document.getElementById("webcam");return void 0!==c.srcObject?(c.srcObject=U,c.play()):(X=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(X):window.webkitURL.createObjectURL(X),a("#webcam").attr("src",X)),window.console.log(U),Y=null!==MediaSource||void 0!==MediaSource?new MediaRecorder(U):new MediaRecorder(U,Z),a("#recstop").attr("src",a("#recurl").val()),a("#recstop").on("click",function(){k()}),a("#leftspan").css("display","inline"),a("#rightspan").css("display","none"),require(["core/str"],function(b){var c=b.get_string("camera_preview","local_mymedia",null);a.when(c).done(function(b){a("#status").html(b)})}),q(),0})["catch"](function(b){return require(["core/str"],function(b){var c=b.get_string("unsupported_camera","local_mymedia",null);a.when(c).done(function(a){h(a)})}),window.console.log(b),-1})}}function n(){return!(M<=0)&&!(M>2e9)}function o(a){return a.indexOf("video/avi")!=-1||a.indexOf("video/x-msvideo")!=-1||a.indexOf("video/mpeg")!=-1||a.indexOf("video/mpg")!=-1||a.indexOf("video/mp4")!=-1||a.indexOf("video/ogg")||a.indexOf("video/quicktime")!=-1||a.indexOf("video/VP8")!=-1||a.indexOf("video/x-flv")!=-1||a.indexOf("video/x-f4v")!=-1||a.indexOf("video/x-matroska")!=-1||a.indexOf("video/x-ms-wmv")!=-1||a.indexOf("video/webm")!=-1?"video":a.indexOf("audio/ac3")!=-1||a.indexOf("audio/ogg")!=-1||a.indexOf("audio/mpeg")!=-1||a.indexOf("audio/mp4")!=-1||a.indexOf("audio/mp3")!=-1||a.indexOf("audio/wav")!=-1||a.indexOf("audio/x-ms-wma")!=-1?"audio":a.indexOf("image/gif")!=-1||a.indexOf("image/jpeg")!=-1||a.indexOf("image/png")!=-1||a.indexOf("image/tiff")!=-1?"image":"N/A"}function p(a){return a.indexOf("video/avi")!=-1||a.indexOf("video/x-msvideo")!=-1?"avi":a.indexOf("video/mpeg")!=-1||a.indexOf("video/mpg")!=-1||a.indexOf("audio/mpeg")!=-1||a.indexOf("audio/mpg")!=-1?"mpeg":a.indexOf("video/mp4")!=-1||a.indexOf("video/m4v")!=-1||a.indexOf("audio/mp4")!=-1?"mp4":a.indexOf("video/ogg")!=-1?"ogg":a.indexOf("video/quicktime")!=-1?"mov":a.indexOf("video/VP8")!=-1||a.indexOf("video/VP9")!=-1||a.indexOf("video/vp8")!=-1||a.indexOf("video/vp9")!=-1||a.indexOf("video/webm")!=-1?"webm":a.indexOf("video/x-flv")!=-1||a.indexOf("video/x-f4v")!=-1?"flv":a.indexOf("video/x-matroska")!=-1?"mkv":a.indexOf("video/x-ms-wmv")!=-1?"wmv":a.indexOf("audio/ac3")!=-1?"ac3":a.indexOf("audio/ogg")!=-1?"ogg":a.indexOf("audio/wav")!=-1?"wav":a.indexOf("audio/x-ms-wma")!=-1?"wma":a.indexOf("image/gif")!=-1?"gif":a.indexOf("image/jpeg")!=-1?"jpg":a.indexOf("image/png")!=-1?"png":a.indexOf("image/tiff")!=-1?"tiff":"webm"}function q(){null===X||null===V||0===V.size||N===!1||""===a("#name").val()||""===a("#tags").val()||""===O||"N/A"===O?(a("#entry_submit").prop("disabled",!0),a("#entry").val("")):a("#entry_submit").prop("disabled",!1)}function r(b){a("#upload_info").html(""),a("#upload_info").append('<font color="red">'+b+"</font><br>"),B(),C()}function s(b,c,d,e,f){require(["core/str","core/notification"],function(g,h){var i=[{key:"upload_success",component:"local_mymedia"},{key:"entryid_header",component:"local_mymedia"},{key:"name_header",component:"local_mymedia"},{key:"tags_header",component:"local_mymedia"},{key:"desc_header",component:"local_mymedia"},{key:"creatorid_header",component:"local_mymedia"},{key:"insert_media",component:"atto_kaltura"}];g.get_strings(i).then(function(g){var h="<h3>"+g[0]+"</h3>";return h+='<table border="2" cellpadding="5">',h+="<tr><td>"+g[1]+"</td><td>"+b+"</td></tr>",h+="<tr><td>"+g[2]+"</td><td>"+c+"</td></tr>",h+="<tr><td>"+g[3]+"</td><td>"+d+"</td></tr>",h+="<tr><td>"+g[4]+"</td><td>"+e+"</td></tr>",h+="<tr><td>"+g[5]+"</td><td>"+f+"</td></tr>",h+="</table>",h+="<br>",h+='<p><font color="red">'+g[6]+"</font></p>",a("#upload_info").html(h),0}).fail(h.exception)}),A(),C()}function t(){a("#file_info").html(""),a("#type").val(""),P="",Q=0,R=0,B(),C()}function u(a){var b=/["$%&'~^\\`\/]/;return b.test(a)!==!0}function v(a){var b=/[!"#$%&'~|^\\@`()[\]{}:;+*\/=<>?]/;return b.test(a)!==!0}function w(){var b=a("#name").val(),c=a("#tags").val(),d=a("#description").val(),e=!0;return u(b)===!1&&(require(["core/str"],function(b){var c=b.get_string("wrong_name","local_mymedia",null);a.when(c).done(function(a){window.alert(a)})}),e=!1),v(c)===!1&&(require(["core/str"],function(b){var c=b.get_string("wrong_tags","local_mymedia",null);a.when(c).done(function(a){window.alert(a)})}),e=!1),u(d)===!1&&(require(["core/str"],function(b){var c=b.get_string("wrong_desc","local_mymedia",null);a.when(c).done(function(a){window.alert(a)})}),e=!1),e}function x(){return w()!==!1&&(n()===!1?(require(["core/str"],function(b){var c=b.get_string("wrong_filesize","local_mymedia",null);a.when(c).done(function(a){window.alert(a)})}),!1):(a("#entry_submit").prop("disabled",!0),E(),!0))}function y(){if(null===parent.document.getElementById("kaltura_select_id")||null===parent.document.getElementById("kaltura_select_id")[0]){var b=a("body",parent.document),c='<input type="hidden" name="kaltura_select_id" id="kaltura_select_id" value="">';b.append(c),c='<input type="hidden" name="kaltura_select_name" id="kaltura_select_name" value="">',b.append(c);var d=a("#kalturahost").val();c='<input type="hidden" name="kaltura_host" id="kaltura_host" value="',c=c+d+'">',b.append(c);var e=a("#partnerid").val();c='<input type="hidden" name="kaltura_partnerid" id="kaltura_partnerid" value="',c=c+e+'">',b.append(c);var f=a("#uiconfid").val();c='<input type="hidden" name="kaltura_uiconfid" id="kaltura_uiconfid" value="',c=c+f+'">',b.append(c);var g=a("#player_width").val();c='<input type="hidden" name="kaltura_width" id="kaltura_width" value="'+g+'">',b.append(c);var h=a("#player_height").val();c='<input type="hidden" name="kaltura_height" id="kaltura_height" value="'+h+'">',b.append(c),c='<input type="hidden" name="kaltura_filetype" id="kaltura_filetype" value="">',b.append(c),c='<input type="hidden" name="kaltura_naturalwidth" id="kaltura_naturalwidth" value="">',b.append(c),c='<input type="hidden" name="kaltura_naturalheight" id="kaltura_naturalheight" value="">',b.append(c)}}function z(b,c){null!==b&&""!==b&&null!==parent.document.getElementById("kaltura_select_id")&&null!==parent.document.getElementById("kaltura_select_id")[0]&&(a("#kaltura_select_id",parent.document).val(b),a("#kaltura_select_name",parent.document).val(c),a("#kaltura_filetype",parent.document).val(P),a("#kaltura_naturalwidth",parent.document).val(Q),a("#kaltura_naturalheight",parent.document).val(R))}function A(){a("#kaltura_insert_btn",parent.document).prop("disabled",!1),a("#kaltura_insert_btn",parent.document).css({opacity:"1.0"})}function B(){a("#kaltura_insert_btn",parent.document).prop("disabled",!0),a("#kaltura_insert_btn",parent.document).css({opacity:"0.5"})}function C(){a("#kaltura_cancel_btn",parent.document).prop("disabled",!1),a("#kaltura_cancel_btn",parent.document).css({opacity:"1.0"})}function D(){a("#kaltura_cancel_btn",parent.document).prop("disabled",!0),a("#kaltura_cancel_btn",parent.document).css({opacity:"0.5"})}function E(){var b=a("#kalturahost").val(),c=a("#ks").val();B(),D(),y(),G(b,c)}function F(b,c,d){var e,f=new FormData;f.append("action","delete"),f.append("ks",c),f.append("uploadTokenId",d);var g={type:"POST",data:f,cache:!1,contentType:!1,scriptCharset:"utf-8",processData:!1,async:!0,dataType:"xml"},h=b+"/api_v3/service/uploadToken/action/delete";return a.ajax(h,g).done(function(a){null===a&&(e=!1),e=!0}).fail(function(a){e=!1,null!==a&&window.console.dir(a)}),e}function G(b,c){var d,e,f={type:"GET",cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",dataType:"xml"},g=b+"/api_v3/service/uploadToken/action/add?ks="+c;g+="&uploadToken:objectType=KalturaUploadToken",g=g+"uploadToken:fileName="+encodeURI(W),g=g+"&uploadToken:fileSize="+V.size,g=g+"&uploadToken:autoFinalize="+ba.NULL,a.ajax(g,f).done(function(f){if(null===f)return void r("Cannot create upload token !<br>(Cannot get a XML response.)");if(e=a(f).find("code"),null!==e&&void 0!==typeof e&&""!==e.text())return void r("Cannot create upload token !<br>("+e.text()+")");if(e=a(f).find("status"),null===e||void 0===typeof e||""===e.text())return void r("Cannot create upload token !<br>(Cannot get status of upload token.)");var g=e.text();return g!=da.PENDING?void r("Cannot create upload token !<br>(UPLOAD_TOKEN_STATUS : "+g+")"):(e=a(f).find("id"),null===e||void 0===typeof e||""===e.text()?void r("Cannot create uplaod token !<br>(Cannot get an uploadTokenId.)"):(d=e.text(),void setTimeout(function(){H(b,c,d)},50)))}).fail(function(a){null!==a&&window.console.dir(a),r("Cannot create upload token !<br>(Cannot connect to kaltura server.)")})}function H(b,c,d){var e,f,g="",h="",i="",j="",k="",l=a("#name").val(),m=a("#tags").val(),n=a("#description").val(),o=a("#controlId").val(),p=a("#creatorId").val();l=l.trim(),m=m.trim(),null!==n&&(n=n.trim());var q=new FormData;q.append("action","add"),q.append("ks",c),q.append("entry:objectType","KalturaMediaEntry"),q.append("entry:mediaType",aa.VIDEO),q.append("entry:sourceType",1),q.append("entry:name",l),q.append("entry:tags",m),null!==n&&""!==n?q.append("entry:description",n):q.append("entry:description",""),q.append("entry:categories",a("#categories").val()),null!==o&&""!==o&&q.append("entry:accessControlId",o),q.append("entry:creatorId",p),q.append("entry:userId",p);var s={type:"POST",data:q,cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",processData:!1,dataType:"xml"},t=b+"/api_v3/service/media/action/add";a.ajax(t,s).done(function(l){return null===l||void 0===typeof l?(F(b,c,d),void r("Cannot create media entry !<br>(Cannot get a XML response.)")):(e=a(l).find("code"),null!==e&&void 0!==typeof e&&""!==e.text()?(F(b,c,d),void r("Cannot create media entry !<br>("+e.text()+")")):(e=a(l).find("status"),null===e||void 0===typeof e||""===e.text()?(F(b,c,d),void r("Cannot create media entyry !<br>(Cannot get a mediaEntryStatus.)")):(f=e.text(),f!=ca.ENTRY_NO_CONTENT?(F(b,c,d),void r("Cannot create media entry!<br>(mediaEntryStatus: "+f+")")):(e=a(l).find("id"),g=e.text(),e=a(l).find("name"),h=e.text(),e=a(l).find("tags"),i=e.text(),e=a(l).find("description"),j=null!==e&&void 0!==typeof e&&""!==e.text()?e.text():"",e=a(l).find("creatorId"),k=e.text(),null===g||""===g||null===h||""===h||null===i||""===i||null===k||""===k||""!==n&&(null===j||""===j)?(F(b,c,d),void r("There exists wrong information(s) <br>")):void setTimeout(function(){I(b,c,d,g)},50)))))}).fail(function(a){null!==a&&window.console.dir(a),F(b,c,d),r("Cannot create media entry !<br>(Cannot connect to kaltura server.)")})}function I(b,c,d,e){var f,g=new FormData;a("#upload_info").html(""),require(["core/str"],function(b){var c=b.get_string("recorder_uploading","local_mymedia",null);a.when(c).done(function(b){a("#upload_info").append(b+"<br>")})}),require(["core/str"],function(b){var c=b.get_string("progress","local_mymedia",null);a.when(c).done(function(b){var c="<p>"+b;c+=': <span id="pvalue" style="color:#00b200">0.00</span> %</p>',a("#upload_info").append(c)})}),g.append("action","upload"),g.append("ks",c),g.append("uploadTokenId",d),g.append("fileData",V,encodeURI(W),V.size),g.append("resume",!1),g.append("finalChunk",!0),g.append("resumeAt",0);var h={type:"POST",data:g,cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",processData:!1,dataType:"xml",xhr:function(){var b=a.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(b){var c=parseInt(b.loaded/b.total*100);a("#pvalue").html(parseInt(c))},!1),b}},i=b+"/api_v3/service/uploadToken/action/upload";a.ajax(i,h).done(function(g){if(null===g)return F(b,c,d),void r("Cannot upload the video !<br>(Cannot get a XML response.)");if(f=a(g).find("code"),null!==f&&void 0!==typeof f&&""!==f.text())return F(b,c,d),void r("Cannot upload the video !<br>("+f.text()+")");if(f=a(g).find("status"),null===f||void 0===typeof f||""===f.text())return F(b,c,d),void r("Cannot upload the video !<br>(Cannot get an uploadTokenStatus.)");var h=f.text();return h!=da.FULL_UPLOAD&&h!=da.PARTIAL_UPLOAD?(F(b,c,d),void r("Cannot upload the video !<br>(UPLOAD_TOKEN_STATUS : "+h+")")):(window.console.log("File chunk have been transmitted."),require(["core/str"],function(b){var c=b.get_string("attach_file","local_mymedia",null);a.when(c).done(function(b){a("#upload_info").append(b+"<br>")})}),void setTimeout(function(){J(b,c,d,e)},1e3))}).fail(function(a){null!==a&&window.console.dir(a),F(b,c,d),r("Cannot upload the file !<br>(Cannot connect to contents server.)")})}function J(b,c,d,e){var f,g,h="",i="",j="",k="",l=new FormData;l.append("action","addContent"),l.append("ks",c),l.append("entryId",e),l.append("resource:objectType","KalturaUploadedFileTokenResource"),l.append("resource:token",d);var m={type:"POST",data:l,cache:!1,async:!0,contentType:!1,scriptCharset:"utf-8",processData:!1,dataType:"xml"},n=b+"/api_v3/service/media/action/addContent";a.ajax(n,m).done(function(l){return null===l||void 0===typeof l?(F(b,c,d),void r("Cannot attach uploaded file !<br>(Cannot get a XML response.)")):(g=a(l).find("code"),null!==g&&void 0!==typeof g&&""!==g.text()?(F(b,c,d),void r("Cannot attach uploaded file !<br>("+g.text()+")")):(g=a(l).find("status"),null===g||void 0===typeof g||""===g.text()?(F(b,c,d),void r("Cannot attach uploaded file !<br>(Cannot get a mediaEntryStatus.)")):(f=g.text(),f!=ca.ENTRY_READY&&f!=ca.ENTRY_PENDING&&f!=ca.ENTRY_PRECONVERT&&f!=ca.IMPORT&&f!=ca.IMPORTING?(F(b,c,d),void r("Cannot attach uploaded file !<br>(mediaEntryStatus: "+f+")")):(g=a(l).find("id"),e=g.text(),g=a(l).find("name"),h=g.text(),g=a(l).find("tags"),i=g.text(),g=a(l).find("description"),j=null!==g&&void 0!==typeof g&&""!==g.text()?g.text():"",g=a(l).find("creatorId"),k=g.text(),s(e,h,i,j,k),void z(e,h)))))}).fail(function(a){null!==a&&window.console.dir(a),F(b,c,d),r("Cannot attach uploaded file !<br>(Cannot connect to kaltura server.)")})}function K(){var b=a("#kalturahost").val(),c=b+"/api_v3/service/session/action/end";a.ajax({type:"GET",url:c,cache:!1}).done(function(a){null===a?window.console.log("Cannot delete the uploadToken ! (Cannot get a XML response.)"):window.console.log("Kaltura Session has been deleted.")}).fail(function(a){window.console.log("Cannot delete the uploadToken ! (Cannot connect to kaltura server.)"),null!==a&&window.console.dir(a)})}function L(){a("#kaltura_select_id",parent.document).remove(),a("#kaltura_select_name",parent.document).remove(),a("#kaltura_host",parent.document).remove(),a("#kaltura_partnerid",parent.document).remove(),a("#kaltura_uiconfid",parent.document).remove(),a("#kaltura_width",parent.document).remove(),a("#kaltura_height",parent.document).remove(),a("#kaltura_filetype",parent.document).remove(),a("#kaltura_naturalwidth",parent.document).remove(),a("#kaltura_naturalheight",parent.document).remove()}var M=0,N=!1,O="",P="",Q=0,R=0,S=400,T=300,U=null,V=null,W="",X=null,Y=null,Z=null,$=window.URL&&window.URL.createObjectURL?function(a){return window.URL.createObjectURL(a)}:window.webkitURL&&window.webkitURL.createObjectURL?function(a){return window.webkitURL.createObjectURL(a)}:void 0,_=window.URL&&window.URL.revokeObjectURL?function(a){return window.URL.revokeObjectURL(a)}:window.webkitURL&&window.webkitURL.revokeObjectURL?function(a){return window.webkitURL.revokeObjectURL(a)}:void 0,aa={VIDEO:1,IMAGE:2,AUDIO:5},ba={TRUE:1,FALSE:0,NULL:-1},ca={ENTRY_IMPORTING:-2,ENTRY_CONVERTING:-1,ENTRY_IMPORT:0,ENTRY_PRECONVERT:1,ENTRY_READY:2,ENTRY_DELETED:3,ENTRY_PENDING:4,ENTRY_MODERATE:5,ENTRY_BLOCKED:6,ENTRY_NO_CONTENT:7},da={PENDING:0,PARTIAL_UPLOAD:1,FULL_UPLOAD:2,CLOSED:3,TIMED_OUT:4,DELETED:5};a(window).on("change",function(){q()}),a(window).on("load",function(){a("#name").val(""),a("#tags").val(""),a("#description").val("")}),m(),a(window).on("unload",function(){if(null!==X&&(window.URL&&window.URL.revokeObjectURL?window.URL.revokeObjectURL(X):window.webkitURL.revokeObjectURL(X),V=null,X=null),null!==U){if(U.getTracks)for(var a=U.getTracks(),b=a.length-1;b>=0;--b)a[b].stop();else U.stop();document.getElementById("webcam").srcObject&&(document.getElementById("webcam").srcObject=null)}K()}),a("#name").on("change",function(){q()}),a("#tags").on("change",function(){q()}),a("#entry_submit").on("click",function(){x()}),a("#entry_reset").on("click",function(){t()}),L(),B(),C()}}});